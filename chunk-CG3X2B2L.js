import{a as c}from"./chunk-KHYJEK4E.js";import{O as s,S as l,a as i,ba as u,fa as S}from"./chunk-RB5HBADI.js";var g=class n{constructor(t){this.document=t;let e=t.defaultView?.localStorage;e&&(this.getSalesData=S(JSON.parse(e.getItem("salesData")||"[]")))}getSalesData;createSalesEntry(t){t.id=c("sale"),this.getSalesData.update(e=>[...e,t]),localStorage.setItem("salesData",JSON.stringify(this.getSalesData()))}updateSalesEntry(t){this.getSalesData.update(e=>e.map(a=>a.id===t.id?i(i({},a),t):a)),localStorage.setItem("salesData",JSON.stringify(this.getSalesData()))}deleteSalesEntry(t){this.getSalesData.update(e=>e.filter(a=>a.id!==t.id)),localStorage.setItem("salesData",JSON.stringify(this.getSalesData()))}calculateTotalSalesAmount(t){return!t||!Array.isArray(t)?0:t.reduce((e,a)=>{let r=typeof a.amount=="string"?parseFloat(a.amount):a.amount;return e+(isNaN(r)?0:r)},0)}getTotalQuantity(t){return!t||!t.itemsSold||!Array.isArray(t.itemsSold)?0:t.itemsSold.reduce((e,a)=>{let r=typeof a.quantity=="string"?parseInt(a.quantity,10):a.quantity;return e+(isNaN(r)?0:r)},0)}getTodaySales(){let t=this.getSalesData();if(!t||!Array.isArray(t))return[];let e=new Date;e.setHours(0,0,0,0);let a=new Date(e);return a.setDate(a.getDate()+1),t.filter(r=>{let o=r.date instanceof Date?r.date:new Date(r.date);return o>=e&&o<a})}static \u0275fac=function(e){return new(e||n)(l(u))};static \u0275prov=s({token:n,factory:n.\u0275fac,providedIn:"root"})};export{g as a};
