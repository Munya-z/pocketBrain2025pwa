import{a as M}from"./chunk-WUNBKNUI.js";import{a as D,b as C}from"./chunk-Q25FSYLX.js";import{e as W}from"./chunk-A4VS2O2T.js";import"./chunk-6AXJB3HD.js";import{$ as f,Aa as _,Na as h,Oa as k,Pa as E,Qa as I,Ra as y,Sa as e,Ta as n,Ua as g,Xa as x,_ as v,ab as i,bb as m,cb as d,fb as O,sa as l,wa as w}from"./chunk-RB5HBADI.js";var L=(o,r)=>r.id;function P(o,r){if(o&1&&(e(0,"p",20),i(1),n()),o&2){let t=x().$implicit;l(),m(t.name)}}function V(o,r){if(o&1&&(e(0,"p",21),i(1),n()),o&2){let t=x().$implicit;l(),m(t.name)}}function F(o,r){if(o&1&&(e(0,"div",19)(1,"div"),h(2,P,2,1,"p",20)(3,V,2,1,"p",21),e(4,"p",3),i(5),n()(),e(6,"div")(7,"p",22),i(8),n(),e(9,"p",23),i(10),n()()()),o&2){let t=r.$implicit;y("routerLink",O("view-debtor-details/",t.id)),l(2),k(t.status==="barned"?2:3),l(3),d("added on ",t.debtInstances[0].agreedDuedate),l(3),d("$",t.totalAmountOwed),l(2),d("",t.debtInstances.length,"\xA0active debts")}}var B=(r=>(r.PUSH_SUBSCRIPTION_PUBLIC_KEY="BDngkWh8Fmv7q2_crUXFo2klFBDbzhElVQ4WxVd5y4hYYPRCVlrHy49tggOd9D8k3utFFKeS3GaIpuUmCd0pBJE",r))(B||{}),S=class o{constructor(r){this.debtService=r}calculateTotalDebt(r){return r.reduce((t,a)=>t+(a.totalAmountOwed||0),0)}calculateCurrentWeekDebtTotal(r){let t=D(),a=C(t);return r.reduce((c,p)=>{let T=p.debtInstances.filter(u=>{let s=new Date(u.dateOfCredit);return s>=t&&s<=a}).reduce((u,s)=>u+(s.amount||0),0);return c+T},0)}countCurrentWeekDebtors(r){let t=D(),a=C(t);return r.filter(c=>c.debtInstances.some(p=>{let b=new Date(p.dateOfCredit);return b>=t&&b<=a})).length}static \u0275fac=function(t){return new(t||o)(w(M))};static \u0275cmp=_({type:o,selectors:[["app-view-debtors"]],decls:43,vars:4,consts:[[1,"debt-header"],[1,"clr-white"],[1,"xxl-font","mb-1"],[1,"small-font"],[1,"cards"],[1,"card"],[1,"clr-m-light","small-font","mb-1"],[1,"clr-white","xxl-font","mb-1"],[1,"clr-m-light","small-font"],[1,"action-buttons","mb-3"],["routerLink","/add-debtor",1,"main"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 640 512"],["d","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM504 312l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"],[1,"edit"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512"],["d","M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"],[1,"debtors-list"],[1,"xl-font","mb-1"],[1,"debtors-list-container"],[1,"debtor-item","pvt-1",3,"routerLink"],[1,"mb-1","clr-dan","normal-font"],[1,"mb-1","clr-m","normal-font"],[1,"mb-1","normal-font"],[1,"active-debts","small-font"]],template:function(t,a){t&1&&(e(0,"section")(1,"section",0)(2,"header",1)(3,"h2",2),i(4,"debt managment"),n(),e(5,"p",3),i(6,"just stop giving out debt"),n()(),e(7,"div",4)(8,"div",5)(9,"div",6),i(10," total debtors "),n(),e(11,"div",7)(12,"p"),i(13),n()(),e(14,"div",8)(15,"p"),i(16),n()()(),e(17,"div",5)(18,"div",6),i(19," total debt "),n(),e(20,"div",7)(21,"p"),i(22),n()(),e(23,"div",8)(24,"p"),i(25),n()()()()(),e(26,"div",9)(27,"button",10),v(),e(28,"svg",11),g(29,"path",12),n(),f(),e(30,"p"),i(31,"add debtor"),n()(),e(32,"button",13),v(),e(33,"svg",14),g(34,"path",15),n(),f(),e(35,"p"),i(36,"filter"),n()()()(),e(37,"section",16)(38,"h2",17),i(39,"Recent Debtors"),n(),e(40,"div",18),E(41,F,11,6,"div",19,L),n()()),t&2&&(l(13),m(a.debtService.getDebtors().length),l(3),d("",a.countCurrentWeekDebtors(a.debtService.getDebtors())," more this week"),l(6),d("$",a.calculateTotalDebt(a.debtService.getDebtors())),l(3),d("+",a.calculateCurrentWeekDebtTotal(a.debtService.getDebtors()),"\xA0 this week "),l(16),I(a.debtService.getDebtors()))},dependencies:[W],styles:["section[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:45%}.debtors-list[_ngcontent-%COMP%]{padding:0 5vw}.debtors-list[_ngcontent-%COMP%]   .debtor-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 0}"]})};export{B as ServiceKeysEnum,S as default};
